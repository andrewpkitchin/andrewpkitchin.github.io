---
layout: post
title: "i'm thinking of a number"
date: 2025-03-14
permalink: /thinking-of-a-number.html
math: true
---

<img src="/assets/images/bayes_comic.png" alt="prior posterior meme" width="400" class="feature-image">

<blockquote>"I'm thinking of a number between 1 and 100. Let's call the number <code>n</code>. Can you guess it?"</blockquote>

<div class="game-section" style="margin-bottom: 0;">
  <label for="userGuess">What's your guess?</label>
  <input type="number" id="userGuess" min="1" max="100" />
  <button onclick="recordGuess()" class="game-button">Submit</button>
  <div id="guessStatus" class="status-box"></div>
</div>

<div class="game-section" style="margin-top: 0;">
  <h2 style="margin-top: 0; margin-bottom: 0.5rem;">need a clue?</h2>
  <p>
    If you want a clue, click the button below. Each time you click, I'll give you a number between <code>n</code> and 100. 
    You can use these clues to update your belief of how good your guess is. You can also go back and change your guess if you like.
  </p>
  <button onclick="giveClue()" class="game-button">Clue</button>
  <div id="clueOutput" class="status-box"></div>
</div>

<canvas id="beliefChart" width="600" height="400"></canvas>

<div class="game-section">
  <h2>how it works</h2>
  <p>
    The graph shows the probabilities of what <code>n</code> might be. This is updated each time you get a clue. 
    We start by assuming every number is equally likely - this is called a uniform prior. After each clue, we apply Bayes' theorem 
    to update the distribution of probabilities.
  </p>
  
  <img src="/assets/images/bayes_theorem.png" alt="Bayes theorem" width="400">
  
  <p>
    Here's the details of what's going on:
  </p>
  
  <p>
    We want to calculate the probability of <code>n</code> being some number, given a clue <code>c</code>, namely <code>P(n | c)</code>. This is called the posterior probability.
  </p>
  
  <p>
    Our prior belief is that all numbers are equally likely, so each number has a probability of 1% of actually being <code>n</code>. Now you get a clue, say <code>c</code>.
  </p>
  
  <p>
    For each possible number <code>i</code> (from 1 to 100), you compute, what we call the likelihood, <code>P(c | n = i)</code>. We read this as: the probability of getting c as the clue, given that <code>n</code> is equal to <code>i</code>. Let's look at the case when the first clue is 90.
  </p>
  
  <ul>
    <li>If <code>i > 90</code>, then <code>P(c | n = i) = 0</code>, because the clue can't be smaller than <code>n</code>.</li>
    <li>If <code>i â‰¤ 90</code>, then <code>P(c | n = i) = 1 / (101 - i)</code>, because the clue is uniformly sampled between <code>n</code> and 100.</li>
  </ul>
  
  <p>
    Now multiply each prior by its corresponding likelihood. For example, for <code>i = 80</code>:
  </p>
  
  $$
  P(n = 80 | c = 90) \propto P(c = 90 | n = 80) \cdot P(n = 80) = \frac{1}{21} \cdot \frac{1}{100} \approx 0.000476
  $$
  
  <p>
    The symbol $\propto$ means "is proportional to." That is, this isn't the final probability yet, it's off by some factor. We still need to normalize these values so they add up to 1 (because they are probabilities). This is what we mean by normalize. After computing this product for all possible values of <code>n</code>, we divide each result by the total sum to get the final probabilities:
  </p>
  
  $$
  P(n = i | c = 90) = \frac{P(c = 90 | n = i) \cdot P(n = i)}{\sum_{j=1}^{100} P(c = 90 | n = j) \cdot P(n = j)}
  $$
  
  <p>
    This gives us the updated probability distribution and we can see our new best guess for what <code>n</code> might be. Also, these new probabilities will act as prior probabilities the next time we get a clue - hence the silly meme at the beginning.
  </p>
</div>

<div class="game-section">
  <h2>ready to check your answer?</h2>
  <p>
    Now back to your guess. Let's see if you were correct!
  </p>
  <button onclick="revealNumber()" class="game-button">My Number</button>
  <div id="revealOutput" class="status-box"></div>
</div>

<style>
  /* Game-specific styles that integrate with your site theme */
  .game-section {
    margin: 0.8rem 0;
    padding-top: 0.2rem;
  }
  
  .game-button {
    background-color: #267CB9;
    color: white;
    padding: 0.6rem 1rem;
    margin: 0.5rem 0;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s;
    font-family: inherit;
  }
  
  .game-button:hover {
    background-color: #1a5a8a;
  }
  
  input[type="number"] {
    padding
