---
layout: post
title: "bayesian guessing 1"
date: 2025-03-13
permalink: /bayesian-guess1.html
math: true
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Bayesian Guessing Game</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 2rem auto;
      max-width: 800px;
      line-height: 1.6;
      color: #333;
      background-color: #f9f9f9;
      padding: 0 20px;
    }
    
    h1 {
      color: #2c3e50;
      text-align: center;
      margin-bottom: 1.5rem;
      border-bottom: 2px solid #3498db;
      padding-bottom: 10px;
    }
    
    p {
      margin-bottom: 1.2rem;
    }
    
    .game-container {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      padding: 2rem;
      margin-bottom: 2rem;
    }
    
    .input-group {
      display: flex;
      margin: 1rem 0;
    }
    
    input, button {
      padding: 0.8rem;
      margin: 0.5rem 0;
      border-radius: 4px;
      font-size: 1rem;
    }
    
    input {
      border: 1px solid #ddd;
      flex-grow: 1;
      margin-right: 0.5rem;
    }
    
    button {
      background-color: #3498db;
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    
    button:hover {
      background-color: #2980b9;
    }
    
    .clue-button {
      background-color: #2ecc71;
    }
    
    .clue-button:hover {
      background-color: #27ae60;
    }
    
    .reveal-button {
      background-color: #e74c3c;
    }
    
    .reveal-button:hover {
      background-color: #c0392b;
    }
    
    #guessStatus, #clueOutput, #revealOutput {
      padding: 0.8rem;
      border-radius: 4px;
      margin: 1rem 0;
    }
    
    #guessStatus {
      background-color: #f8f9fa;
      border-left: 4px solid #6c757d;
    }
    
    #clueOutput {
      background-color: #e8f4f8;
      border-left: 4px solid #2ecc71;
    }
    
    #revealOutput {
      background-color: #ffeaa7;
      border-left: 4px solid #e74c3c;
    }
    
    canvas {
      max-width: 100%;
      margin: 1.5rem 0;
      background-color: white;
      border-radius: 4px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    
    .explanation {
      background-color: #f1f8e9;
      border-radius: 8px;
      padding: 1.5rem;
      margin: 2rem 0;
      border-left: 4px solid #8bc34a;
    }
    
    code {
      background-color: #f5f5f5;
      padding: 0.2rem 0.4rem;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
    }
    
    .math {
      font-style: italic;
    }
  </style>
</head>
<body>

<div class="game-container">
  <h1>I'm thinking of a number between 1 and 100...</h1>

  <p>
    In this game, I've picked a secret number <code>n</code> between 1 and 100. Can you guess it?
  </p>
  
  <p>
    If you need a clue, click the button below. Each time you click, I'll give you a number between 1 and <code>n</code>. You can use this information to update your beliefs and improve your guess if you like.
  </p>

  <div class="input-group">
    <label for="userGuess">What's your guess?</label>
    <input type="number" id="userGuess" min="1" max="100" />
    <button onclick="recordGuess()">Submit Guess</button>
  </div>
  <p id="guessStatus"></p>

  <button class="clue-button" onclick="giveClue()">üîç Get a Clue</button>
  <p id="clueOutput"></p>

  <canvas id="beliefChart" width="600" height="400"></canvas>

  <div class="explanation">
    <h3>How Bayesian Updating Works</h3>
    <p>
      The chart above shows your belief about what the number <code>n</code> might be, updated with each new clue. 
      We start by assuming every number is equally likely (a uniform prior probability of 1/100 for each possible number).
    </p>
    
    <p>
      After each clue, we apply Bayes' theorem to update our belief distribution:
    </p>
    
    <p class="math">
      P(n | clue) = P(clue | n) √ó P(n) / P(clue)
    </p>
    
    <p>
      For example, if we receive a clue of 15:
      <ul>
        <li>For n = 10: P(clue=15 | n=10) = 0, because 15 > 10</li>
        <li>For n = 20: P(clue=15 | n=20) = 1/20 = 0.05, because there are 20 possible clues</li>
        <li>For n = 50: P(clue=15 | n=50) = 1/50 = 0.02, because there are 50 possible clues</li>
      </ul>
    </p>
    
    <p>
      This means a clue of 15 makes larger values of n more probable than smaller values, 
      and values below 15 impossible (zero probability).
    </p>
  </div>

  <button class="reveal-button" onclick="revealNumber()">üéØ Reveal the Number</button>
  <p id="revealOutput"></p>
</div>

<script>
  let secretNumber = Math.floor(Math.random() * 100) + 1;
  let userGuess = null;
  let clues = [];

  // Prior: uniform distribution
  let belief = Array(100).fill(1 / 100);

  const ctx = document.getElementById('beliefChart').getContext('2d');
  const chart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: Array.from({length: 100}, (_, i) => i + 1),
      datasets: [{
        label: 'Belief (Probability)',
        data: belief,
        backgroundColor: 'rgba(52, 152, 219, 0.6)',
        borderColor: 'rgba(41, 128, 185, 1)',
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        y: {
          beginAtZero: true,
          max: Math.max(...belief) * 1.1 || 0.05,
          title: {
            display: true,
            text: 'Probability'
          }
        },
        x: {
          title: {
            display: true,
            text: 'Possible Numbers'
          }
        }
      },
      plugins: {
        legend: {
          position: 'top',
        },
        tooltip: {
          callbacks: {
            label: function(context) {
              return `Probability: ${(context.raw * 100).toFixed(2)}%`;
            }
          }
        }
      }
    }
  });

  function recordGuess() {
    const val = parseInt(document.getElementById('userGuess').value);
    if (isNaN(val) || val < 1 || val > 100) {
      document.getElementById('guessStatus').textContent = "Please enter a number between 1 and 100.";
    } else {
      userGuess = val;
      document.getElementById('guessStatus').textContent = `Thanks! You've guessed: ${val}`;
    }
  }

  function giveClue() {
    const clue = Math.floor(Math.random() * secretNumber) + 1;
    clues.push(clue);
    document.getElementById('clueOutput').textContent = `You received a clue: ${clue}`;

    // Bayesian update
    let newBelief = [];
    let total = 0;
    for (let i = 1; i <= 100; i++) {
      // P(clue | n = i): 1/i if clue <= i, else 0
      let likelihood = (clue <= i) ? 1 / i : 0;
      let updated = belief[i - 1] * likelihood;
      newBelief.push(updated);
      total += updated;
    }

    // Normalize
    belief = newBelief.map(p => p / total);

    // Update chart
    chart.data.datasets[0].data = belief;
    chart.options.scales.y.max = Math.max(...belief) * 1.1;
    chart.update();
  }

  function revealNumber() {
    const guessMessage = userGuess !== null ? evaluateGuess(userGuess, secretNumber) : "";
    document.getElementById('revealOutput').textContent = `The number I was thinking of was: ${secretNumber}. ${guessMessage}`;
  }
  
  function evaluateGuess(guess, actual) {
    const difference = Math.abs(guess - actual);
    
    if (difference === 0) {
      return "Wow! Your guess was exactly right! Perfect Bayesian inference!";
    } else if (difference <= 5) {
      return `Your guess was very close! Only off by ${difference}.`;
    } else if (difference <= 15) {
      return `Not bad! Your guess was within ${difference} of the actual number.`;
    } else if (difference <= 30) {
      return `Your guess was off by ${difference}. More clues might have helped!`;
    } else {
      return `Your guess was off by ${difference}. Try using Bayesian updating next time!`;
    }
  }
</script>

</body>
</html>
